# 地图格子生成工具

## 项目概述

这是一个基于Web的地图格子生成工具，支持创建可配置大小的网格地图，并提供缩放、数据导出等功能。该工具使用HTML5 Canvas技术进行可视化渲染。

## 主要功能

### 核心功能
- **地图生成**: 支持自定义地图尺寸和格子大小
- **格子编号**: 逆时针螺旋编号，从左下角开始
- **交互操作**: 点击选择格子、右键拖拽移动
- **缩放控制**: 放大/缩小格子和地图显示
- **数据导出**: 生成包含所有格子坐标数据的文本文件

### 技术特点
- **响应式设计**: 画布容器自适应浏览器窗口大小
- **固定画布**: Canvas画布固定1200×1200像素
- **动态缩放**: 格子在画布中自动适配缩放
- **坐标系统**: 基于Canvas的2D坐标系，原点在左下角

## 文件结构

```
map/
├── index.html          # 主要的HTML文件，包含所有JavaScript代码
├── README.md           # 项目说明文档
├── USAGE.md           # 使用指南
├── 1.jpg             # 项目参考效果图
├── .gitignore         # Git忽略文件配置
└── docs/             # 文档目录（可选）
```

## 使用方法

### 1. 打开工具
在浏览器中打开 `index.html` 文件

### 2. 基本设置
- **地图宽度**: 设置地图宽度（像素）
- **地图高度**: 设置地图高度（像素）
- **格子边长**: 设置每个格子的边长（像素）

### 3. 生成地图
点击"生成地图"按钮或按 `G` 键

### 4. 操作控制
- **选择格子**: 左键点击任意格子
- **拖拽移动**: 右键按住并拖拽
- **放大**: 点击"放大"按钮或按 `+`/`=` 键
- **缩小**: 点击"缩小"按钮或按 `-` 键
- **导出数据**: 点击"打印数据"按钮或按 `S` 键

### 5. 查看信息
点击格子后右侧信息面板显示详细信息，包括：
- 格子编号
- 位置（行列）
- 圈层信息
- 四个角的坐标点

## 技术架构

### 前端技术栈
- **HTML5**: 页面结构和Canvas元素
- **CSS3**: 响应式布局和样式设计
- **JavaScript ES6+**: 核心逻辑和交互功能
- **Canvas API**: 地图绘制和图形渲染

### 核心类
- **TestManager**: 测试记录管理
- **MapTools**: 地图生成、绘制和交互控制

### 关键算法
- **螺旋生成算法**: 逆时针螺旋编号
- **坐标转换**: Canvas坐标系统转换
- **多边形检测**: 射线法检测点在多边形内

## 开发历史

### 版本信息
- **当前版本**: v2.0
- **最后更新**: 2025年11月
- **开发者**: Claude Code Assistant

### 主要更新
- **v1.0**: 基础地图生成和编号功能
- **v1.5**: 添加45°旋转视角和交互功能
- **v2.0**:
  - 移除视角选择功能，固定0°视角
  - 优化画布大小为固定1200×1200
  - 改进缩放逻辑，只影响格子显示
  - 完善响应式布局和用户体验

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 许可证

本项目采用MIT许可证。

## 贡献

欢迎提交Issue和Pull Request来改进项目功能。

---

**项目创建**: 2025年11月
**技术支持**: HTML5 Canvas + 原生JavaScript
**适用场景**: 地图设计、网格系统开发、教学演示